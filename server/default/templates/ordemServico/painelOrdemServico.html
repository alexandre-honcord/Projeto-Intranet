{% extends 'index/index.html' %}
{% block title %}
    Ordens de Serviço
{% endblock %}
{% load static %}

{% block ordemServico %}
<link rel="stylesheet" href="{% static '/resources/css/painelOrdem.css' %}">
<div class="panel-ordem" data-block="home">
    <div class="cards-holder">
        <div class="cards">
            <span>
                <span>{{ quantidade_abertas }}</span>
                Ordens de Serviço Abertas
            </span>
        </div>
        <div class="cards">
            <span>
                <span>{{ quantidade_em_processo }}</span>
                Ordens de Serviço Em Processo
            </span>
        </div>
        <div class="cards">
            <span>
                <span>{{ quantidade_encerradas }}</span>
                Ordens de Serviço Encerradas
            </span>
        </div>
    </div>
    <div class="button-holder">
        <a class="btn btn-sm btn-primary button-ordem" id="addOrdem" href="/ordemServico"><span class="cancel-text">Novo</span><i class="fa-solid fa-plus"></i></a>
    </div>
    <div class="ordens">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="aberta-tab" data-bs-toggle="tab" data-bs-target="#aberta-tab-pane" type="button" role="tab" aria-controls="aberta-tab-pane" aria-selected="true">Abertas</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="emProcesso-tab" data-bs-toggle="tab" data-bs-target="#emProcesso-tab-pane" type="button" role="tab" aria-controls="emProcesso-tab-pane" aria-selected="false">Em Processo</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="encerradas-tab" data-bs-toggle="tab" data-bs-target="#encerradas-tab-pane" type="button" role="tab" aria-controls="encerradas-tab-pane" aria-selected="false">Encerradas</button>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="aberta-tab-pane" role="tabpanel" aria-labelledby="aberta-tab" tabindex="0">
                {% if os_abertas %}
                    {% for os in os_abertas %}
                    <a class="card">
                        <span class="card-item__1">
                            <h4>Ordem de Serviço Nº {{ os.sequencia }}</h4>
                            <div class="badges-hold">
                                <span class="badges">{{ os.grupo }}</span>
                                <span class="badges">{{ os.classificacao }}</span>
                                <span class="time"><i class="fa-solid fa-stopwatch"></i> {{ os.duracao }}</span>
                            </div>
                        </span>
                        <span class="card-item__2">
                            <span class="ini-fim">
                                <p>Aberto em: {{ os.dataAbertura }}</p>
                            </span>
                            <h5>Descrição</h5>
                            <p>{{ os.descricao }}</p>
                        </span>
                        <span class="card-item__3">
                            <h5>Dano</h5>
                            <p>{{ os.dano }}</p>
                        </span>
                    </a>
                    {% endfor %}
                {% else %}
                    <p>Você não possui Ordens de Serviço nessa etapa</p>
                {% endif %}
            </div>
        
            <div class="tab-pane fade" id="emProcesso-tab-pane" role="tabpanel" aria-labelledby="emProcesso-tab" tabindex="0">
                {% if os_em_processo %}
                    {% for os in os_em_processo %}
                    <a class="card">
                        <span class="card-item__1">
                            <h4>Ordem de Serviço Nº {{ os.sequencia }}</h4>
                            <div class="badges-hold">
                                <span class="badges">{{ os.grupo }}</span>
                                <span class="badges">{{ os.classificacao }}</span>
                                <span class="time"><i class="fa-solid fa-stopwatch"></i> {{ os.duracao }}</span>
                            </div>
                        </span>
                        <span class="card-item__2">
                            <span class="ini-fim">
                                <p>Aberto em: {{ os.dataAbertura }}</p>
                            </span>
                            <h5>Descrição</h5>
                            <p>{{ os.descricao }}</p>
                        </span>
                        <span class="card-item__3">
                            <h5>Dano</h5>
                            <p>{{ os.dano }}</p>
                        </span>
                    </a>
                    {% endfor %}
                {% else %}
                    <p>Você não possui Ordens de Serviço nessa etapa</p>
                {% endif %}
            </div>
        
            <div class="tab-pane fade" id="encerradas-tab-pane" role="tabpanel" aria-labelledby="encerradas-tab" tabindex="0">
                {% if os_encerradas %}
                    {% for os in os_encerradas %}
                    <a class="card">
                        <span class="card-item__1">
                            <h4>Ordem de Serviço Nº {{ os.sequencia }}</h4>
                            <div class="badges-hold">
                                <span class="badges">{{ os.grupo }}</span>
                                <span class="badges">{{ os.classificacao }}</span>
                                <span class="time"><i class="fa-solid fa-stopwatch"></i> {{ os.duracao }}</span>
                            </div>
                        </span>
                        <span class="card-item__2">
                            <span class="ini-fim">
                                <p>Aberto em: {{ os.dataAbertura }}</p>
                                <p>Finalizada em: {{ os.dataFim }}</p>
                            </span>
                            <h5>Descrição</h5>
                            <p>{{ os.descricao }}</p>
                        </span>
                        <span class="card-item__3">
                            <h5>Dano</h5>
                            <p>{{ os.dano }}</p>
                        </span>
                    </a>
                    {% endfor %}
                {% else %}
                    <p>Você não possui Ordens de Serviço nessa etapa</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}